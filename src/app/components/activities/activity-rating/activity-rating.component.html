<ion-header>
  <ion-toolbar>
    <ion-title *ngIf="overdue">Ohodnoť spoluhráčov</ion-title>
    <ion-title *ngIf="!overdue">Prihlaseni pouzivatelia</ion-title>
    <ion-title *ngIf="profile">Priatelia</ion-title>
    <ion-buttons slot="end">
      <ion-button (click)="onCancel()">
        <ion-icon name="close"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content *ngIf="!this.profile">
  <ion-list padding *ngFor="let user of this.usersFromDatabase">
    <ion-item>
      <ion-avatar><img src="{{user.photoUrl}}"></ion-avatar>
      {{user.name}}
      <ionic4-star-rating *ngIf="!this.overdue" #rating
                                                 activeIcon = "ios-star"
                                                 defaultIcon = "ios-star-outline"
                                                 activeColor = "#FFD700"
                                                 defaultColor = "#ccccff"
                                                 readonly="true"
                                                rating="{{this.user.behavior / this.user.behaviorCount}}"
                                                 fontSize = "25px"
                                                 (ratingChanged)="logRatingChange(user.id, $event)">
    </ionic4-star-rating>
      <ionic4-star-rating *ngIf="this.overdue && this.loggedUser.user.uid != user.id" #rating
                          activeIcon = "ios-star"
                          defaultIcon = "ios-star-outline"
                          activeColor = "#FFD700"
                          defaultColor = "#ccccff"
                          readonly="false"
                          rating="0"
                          fontSize = "25px"
                          (ratingChanged)="logRatingChange(user.id, $event)">
      </ionic4-star-rating>



      <ion-button (click)="visitProfile(user)" color="danger">Profil</ion-button></ion-item>


  </ion-list>


  <ion-item class="allLogin" *ngIf="this.usersFromDatabase.length==0">
    <p>Všetci boli ohodnotení</p>
      <ion-buttons class="button-login" (click)="onCancel()" slot="end">
        Back
      </ion-buttons>
  </ion-item>
  <p *ngIf="this.usersRated.length >0 ">Ohodnoteni pouzivatelia</p>
  <ion-list  padding *ngFor="let user of this.usersRated">
<!--    toto bude treba klepnut hore, lebo este pri nehranej aktivite to tu je na 2 veci-->
    <ion-avatar><img src="{{user.photoUrl}}"></ion-avatar> /
    <ion-item>{{user.name}}
      <ion-button (click)="visitProfile(user)" color="danger">Profil</ion-button>
      <ion-button *ngIf="!checkFriends(user.id)" (click)="addFriend(user.id)" color="danger">Pridat priatela</ion-button>
      <ion-button *ngIf="checkFriends(user.id)" (click)="deleteFriend(user.id)" color="danger">Odobrat priatela</ion-button>

    </ion-item>


  </ion-list>

</ion-content>

<ion-content *ngIf="profile">
  <ion-list  padding *ngFor="let user of this.friendsFromProfile">
    <ion-avatar><img src="{{user.photoUrl}}"></ion-avatar>
    <ion-item>{{user.name}}
      <ion-button (click)="visitProfile(user)" color="danger">Profil</ion-button>
      <ion-button (click)="deleteFriendFomFriendList(user.id)" color="danger">Odobrat priatela</ion-button>
    </ion-item>
  </ion-list>
</ion-content>
